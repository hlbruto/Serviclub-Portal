(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[0],{2805:function(t,e,i){},"41f4":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"q-pa-md q-gutter-sm"},[i("q-dialog",{model:{value:t.$store.state.dialogo.validarEmail,callback:function(e){t.$set(t.$store.state.dialogo,"validarEmail",e)},expression:"$store.state.dialogo.validarEmail"}},[i("q-card",[i("q-card-section",[i("div",{staticClass:"text-h5 text-primary"},[i("q-item-label",[i("q-icon",{attrs:{name:"mdi-account",size:"25px",color:"primary"}}),t._v("\n            Completando el registro\n          ")],1)],1)]),i("q-card-section",[i("div",{staticClass:"text-grey text-caption text-center"},[i("q-item-label",[t._v("ESCRIBA EL CÓDIGO DE VERIFICACIÓN (PASO 2/2)\n          ")])],1)]),i("q-card-section",{staticClass:"q-pt-none"},[i("div",{staticClass:"q-pa-md q-gutter-y-md column"},[""===t.$store.state.credencial.token?i("p",[t._v("\n            Para completar el registro, debe confirmar que posee\n            un correo electrónico válido; para ello le hemos enviado un mensaje a\n            "),i("strong",[t._v(t._s(t.$store.state.emailAutenticar))]),t._v(".\n          Revise su correo y escriba el código de verificación.")]):i("p",[t._v("Para recuperar su contraseña, le hemos enviado un mensaje a\n            "),i("strong",[t._v(t._s(t.$store.state.emailAutenticar))]),t._v(".\n            Revise su correo y escriba el código de verificación.\n          ")]),i("div",{staticClass:"q-pa-md q-gutter-y-md column items-center"},[i("q-input",{staticStyle:{width:"250px"},attrs:{filled:"","input-class":"text-right","label-slot":"",clearable:"",counter:"","lazy-rules":"",rules:[function(t){return!!t||"El campo es obligatorio"}]},scopedSlots:t._u([{key:"label",fn:function(){return[i("div",{staticClass:"col-auto"},[t._v("Código")])]},proxy:!0}]),model:{value:t.data.codigo,callback:function(e){t.$set(t.data,"codigo",e)},expression:"data.codigo"}}),i("q-btn",{staticClass:"bg-primary text-white",attrs:{flat:"",label:"Enviar código",size:"md"},on:{click:function(e){return t.validarDatos()}}})],1)])]),i("q-card-section",{staticClass:"q-pt-none"},[i("div",{staticClass:"q-pa-md q-gutter-y-md row"},[i("q-item-label",{staticClass:"text-caption"},[i("q-icon",{attrs:{name:"mdi-information"}}),t._v("\n              Si no ha recibido el código\n            ")],1),i("q-btn",{staticClass:"text-primary",attrs:{flat:"",label:"solicite uno nuevo",size:"sm"},on:{click:function(e){return t.solicitar()}}})],1)])],1)],1)],1)},a=[],s={name:"Recomendar",data:function(){return{data:{codigo:"",email:"",credencial:""}}},created:function(){},methods:{validarDatos:function(){""===this.data.codigo||null===this.data.codigo||void 0===this.data.codigo?this.mensajeDatosIncompletos():this.enviar()},mensajeDatosIncompletos:function(){this.$q.notify({color:"negative",position:"bottom",message:"Debe llenar todos los campos obligatorios",icon:"mdi-alert-circle"})},mensajeSatisfactorio:function(){this.$q.notify({color:"positive",position:"bottom",message:"El mensaje fue enviado.",icon:"mdi-check-circle"})},mensajeError:function(t){this.$q.notify({color:"negative",position:"bottom",message:t,icon:"mdi-alert-circle"})},enviar:function(){var t=this;this.data.email=this.$store.state.emailAutenticar,this.data.credencial=this.$store.state.credencial,console.log(this.data),this.$axios.post(this.$store.state.urlAPI+"/usuarios/verificar-codigo",this.data).then((function(e){if(console.log(e.data),"email-cambiado"!=e.data&&"codigo-incorrecto"!=e.data)t.$store.state.credencial.id_usuario=e.data.credencial.id_usuario,t.$store.state.credencial.activo=e.data.credencial.activo,t.$store.state.credencial.estado=e.data.credencial.estado,t.$store.state.credencial.email=e.data.credencial.email,t.$store.state.credencial.token=e.data.credencial.token,void 0!=e.data.credencial.municipio&&(t.$store.state.credencial.municipio=e.data.credencial.municipio),void 0!=e.data.credencial.instalacion&&(t.$store.state.credencial.instalacion=e.data.credencial.instalacion),void 0!=e.data.credencial.nombre&&(t.$store.state.credencial.nombre=e.data.credencial.nombre),void 0!=e.data.credencial.telefono&&(t.$store.state.credencial.telefono=e.data.credencial.telefono),void 0!=e.data.credencial.direccion&&(t.$store.state.credencial.direccion=e.data.credencial.direccion),void 0!=e.data.credencial.ci&&(t.$store.state.credencial.ci=e.data.credencial.ci),t.$store.state.dialogo.validarEmail=!1,t.$router.push("/perfil"),t.$q.notify({color:"secondary",position:"bottom",message:"Bienvenid@ "+t.$store.state.credencial.nombre+", por favor llene su perfil para poder navegar por el sitio",icon:"mdi-check-circle"});else if("codigo-incorrecto"==e.data){var i="El código es incorrecto";t.mensajeError(i)}else if("email-cambiado"==e.data){var o=JSON.stringify({credencial:t.$store.state.credencial});localStorage.setItem("key",o),t.$store.state.dialogo.validarEmail=!1}})).catch((function(e){console.log(e),t.mensajeError()}))},solicitar:function(){var t=this,e={email:this.$store.state.emailAutenticar};this.$axios.post(this.$store.state.urlAPI+"/recuperar-clave",e).then((function(e){console.log(e.data),1!=e.data&&0!=e.data||t.$q.notify({color:"secondary",position:"bottom",message:t.$store.state.emailAutenticar+" se le ha enviado un nuevo código",icon:"mdi-check-circle"})})).catch((function(t){console.log(t)}))}}},n=s,r=i("2877"),c=Object(r["a"])(n,o,a,!1,null,null,null);e["default"]=c.exports},4229:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-dialog",{model:{value:t.$store.state.dialogo.verServicio,callback:function(e){t.$set(t.$store.state.dialogo,"verServicio",e)},expression:"$store.state.dialogo.verServicio"}},[i("q-carousel",{attrs:{swipeable:"",animated:"",infinite:"",arrows:"","transition-prev":"slide-left","transition-next":"slide-rigth","control-color":"primary"},model:{value:t.$store.state.slideServicio,callback:function(e){t.$set(t.$store.state,"slideServicio",e)},expression:"$store.state.slideServicio"}},t._l(t.$store.state.servicios,(function(e){return i("q-carousel-slide",{key:e.id,staticClass:"column no-wrap",attrs:{name:e.id}},[i("div",{staticClass:"row justify-center items-center"},[i("div",[i("div",{staticClass:"q-mt-xs row justify-end"},[i("q-item-label",{staticClass:"text-primary text-body1 text-center col-10"},[t._v("\n              "+t._s(e.nombre)+"\n            ")]),i("q-btn",{staticClass:"text-primary",attrs:{flat:"",dense:"",size:"10px","icon-right":"mdi-window-close"},on:{click:function(e){t.$store.state.dialogo.verServicio=!1}}})],1),i("div",{staticClass:"q-mt-none row justify-around"},[t.$q.screen.gt.xs?i("div",{staticClass:"q-mt-md col-5 text-caption"},[e.foto?i("q-img",{staticStyle:{width:"100%"},attrs:{src:"img/servicios/"+e.foto,"lazy-src":"img/servicios/"+e.foto}}):t._e(),i("p",{staticClass:"q-mt-md"},[t._v(t._s(e.descripcion))]),i("strong",[t._v("Tarifa:")]),t._v("\n              "+t._s(e.tarifa)+"\n            ")],1):i("div",{staticClass:"q-mt-md col-11"},[e.foto?i("q-img",{attrs:{src:"img/servicios/"+e.foto,"lazy-src":"img/servicios/"+e.foto,sizes:"100%"}}):t._e(),i("p",{staticClass:"q-mt-md"},[t._v(t._s(e.descripcion))]),i("strong",[t._v("Tarifa:")]),t._v("\n              "+t._s(e.tarifa)+"\n            ")],1),i("q-separator",{attrs:{inset:"",vertical:""}}),t.$q.screen.gt.xs&&""!==t.$store.state.credencial.token&&1===e.casa?i("div",{staticClass:"q-mt-none col-6"},[i("SolicitarServicio")],1):""!==t.$store.state.credencial.token&&1===e.casa?i("div",{staticClass:"q-mt-lg col-11"},[i("q-separator",{attrs:{inset:""}}),i("SolicitarServicio")],1):""===t.$store.state.credencial.token&&1===e.casa?i("div",{staticClass:"q-mt-xl col-5 text-red text-center"},[i("div",{staticClass:"q-mt-xl"},[t._v("\n                Para solicitar este servicio, usted debe estar autenticado.\n              ")]),i("div",{staticClass:"q-mt-lg"},[i("q-btn",{attrs:{label:"entrar",color:"primary"},on:{click:function(e){t.$store.state.dialogo.formularioAcceso=!0,t.$store.state.dialogo.verServicio=!1}}})],1)]):i("div",{staticClass:"q-mt-xl col-5 text-red text-center"},[i("div",{staticClass:"q-mt-xl"},[t._v("\n                Por el momento, el servicio no está disponible desde esta aplicación."),i("br"),t._v("\n                Si desea contratarlo, acérquese a su Joven Club más cercano.\n              ")])])],1)])])])})),1)],1)},a=[],s={name:"VerServicio",components:{SolicitarServicio:i("7e80").default},data:function(){return{}},created:function(){}},n=s,r=i("2877"),c=Object(r["a"])(n,o,a,!1,null,null,null);e["default"]=c.exports},"44ea":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("q-card",{staticClass:"card8",attrs:{bordered:""},on:{click:function(e){return t.elegirInstalacion(t.instalacion)}}},[i("q-card-section",{staticClass:"q-mb-sm"},[i("div",{staticClass:"row justify-center text-primary"},[i("q-icon",{attrs:{name:"mdi-home",size:"sm"}})],1),i("div",{staticClass:"row justify-center text-primary"},[i("q-item-label",[i("strong",[t._v(t._s(t.instalacion.nombre))])])],1),i("div",{staticClass:"row justify-center text-grey-7 q-mt-md"},[i("q-item-label",[t._v(t._s(t.instalacion.direccion))])],1),i("div",{staticClass:"row justify-center text-grey-7"},[i("q-item-label",[t._v("Teléfono: "+t._s(t.instalacion.telefono))])],1)])],1)],1)},a=[],s={name:"TarjetaInstalacion",props:["instalacion"],methods:{elegirInstalacion:function(t){this.$store.state.instalacionPreferida=t.nombre,this.$store.state.instalacionDelPedido=t,this.$store.state.municipioId=t.municipioId,this.$store.state.dialogo.eligeMcpio=!1,this.mensajeSatisfactorio()},mensajeSatisfactorio:function(){this.$q.notify({color:"positive",position:"bottom",message:"Usted ha elegido su Joven Club preferido",icon:"mdi-check-circle"})}}},n=s,r=(i("ff60"),i("2877")),c=Object(r["a"])(n,o,a,!1,null,null,null);e["default"]=c.exports},"646a":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"q-pt-none"},[i("q-select",{attrs:{filled:"","options-dense":"",label:"Provincia","label-slot":"","lazy-rules":"",rules:[function(t){return!!t||"El campo es obligatorio"}],options:t.$store.state.arrayNombresProv},on:{input:function(e){return t.limpiarSelectMun()}},model:{value:t.$store.state.credencial.municipio.provincia.nombre,callback:function(e){t.$set(t.$store.state.credencial.municipio.provincia,"nombre",e)},expression:"$store.state.credencial.municipio.provincia.nombre"}}),i("q-select",{attrs:{filled:"","options-dense":"",label:"Municipio","label-slot":"","lazy-rules":"",rules:[function(t){return!!t||"El campo es obligatorio"}],options:t.$store.state.arrayNombresMun,disabled:""===t.$store.state.credencial.municipio.provincia.nombre},on:{input:function(e){return t.obtInstDMun()}},model:{value:t.nombreMun,callback:function(e){t.nombreMun=e},expression:"nombreMun"}})],1)},a=[],s={name:"SelectsProvMun",data:function(){return{provincia:{id:"",nombre:""},nombreMun:""}},computed:{},created:function(){var t=this;this.nombreMun=this.$store.state.credencial.municipio.nombre,console.log("entra al metodo de prov"),0===this.$store.state.provincias.length&&(this.$axios.get(this.$store.state.urlAPI+"/provincias").then((function(e){t.$store.state.provincias=e.data,console.log(e.data);for(var i=0;i<t.$store.state.provincias.length;i++)t.$store.state.arrayNombresProv.push(t.$store.state.provincias[i].nombre);console.log(t.$store.state.arrayNombresProv)})).catch((function(t){console.log(t)})),""!==this.$store.state.credencial.municipio.provincia.nombre&&null!==this.$store.state.credencial.municipio.provincia.nombre&&void 0!==this.$store.state.credencial.municipio.provincia.nombre&&this.obtMunDProv())},methods:{obtMunDProv:function(){var t=this;console.log("entra al metodo de mun");for(var e=0;e<this.$store.state.provincias.length;e++)this.$store.state.credencial.municipio.provincia.nombre===this.$store.state.provincias[e].nombre&&(this.$store.state.credencial.municipio.provinciaId=this.$store.state.provincias[e].id);this.$axios.get(this.$store.state.urlAPI+"/provincias/"+this.$store.state.credencial.municipio.provinciaId+"/municipios").then((function(e){t.$store.state.municipios=e.data,console.log(t.$store.state.municipios);for(var i=0;i<t.$store.state.municipios.length;i++)t.$store.state.arrayNombresMun.push(t.$store.state.municipios[i].nombre)})).catch((function(t){console.log(t)})),""!==this.nombreMun&&null!==this.nombreMun&&void 0!==this.nombreMun&&this.obtInstDMun()},obtInstDMun:function(){var t=this;this.$store.state.instalaciones=[],console.log("entra al metodo de inst");for(var e=0;e<this.$store.state.municipios.length;e++)this.nombreMun===this.$store.state.municipios[e].nombre&&(this.$store.state.credencial.municipio.id=this.$store.state.municipios[e].id);this.$axios.get(this.$store.state.urlAPI+"/municipios/"+this.$store.state.credencial.municipio.id+"/instalacions").then((function(e){t.$store.state.instalaciones=e.data,console.log(t.$store.state.instalaciones)})).catch((function(t){console.log(t)}))},limpiarSelectMun:function(){this.$store.state.municipios=[],this.$store.state.arrayNombresMun=[],this.nombreMun="",this.$store.state.instalaciones=[],this.obtMunDProv()}}},n=s,r=i("2877"),c=Object(r["a"])(n,o,a,!1,null,null,null);e["default"]=c.exports},"7e80":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"q-mt-md"},[i("q-input",{attrs:{filled:"",type:"textarea","label-slot":"",clearable:"",dense:"","lazy-rules":"",rules:[function(t){return!!t||"El campo es obligatorio"}]},scopedSlots:t._u([{key:"label",fn:function(){return[i("div",{staticClass:"row items-center all-pointer-events"},[t._v("\n        Problema\n\n        "),i("q-tooltip",{attrs:{"content-class":"bg-grey-8",anchor:"top left",self:"bottom left",offset:[0,8]}},[t._v("\n          ¿Cuál es el motivo por el que necesita de este Servicio?\n        ")])],1)]},proxy:!0}]),model:{value:t.$store.state.problema,callback:function(e){t.$set(t.$store.state,"problema",e)},expression:"$store.state.problema"}}),i("q-input",{attrs:{filled:"",mask:"date",dense:"",clearable:"","lazy-rules":"",rules:[function(t){return!!t||"El campo es obligatorio"}]},scopedSlots:t._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[i("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[i("q-date",{model:{value:t.$store.state.momento,callback:function(e){t.$set(t.$store.state,"momento",e)},expression:"$store.state.momento"}},[i("div",{staticClass:"row items-center justify-end"},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.$store.state.momento,callback:function(e){t.$set(t.$store.state,"momento",e)},expression:"$store.state.momento"}}),i("q-btn",{staticClass:"bg-primary text-white full-width",attrs:{icon:"home",label:t.$store.state.instalacionPreferida},on:{click:function(e){t.$store.state.dialogo.eligeMcpio=!0}},model:{value:t.$store.state.instalacionPreferida,callback:function(e){t.$set(t.$store.state,"instalacionPreferida",e)},expression:"$store.state.instalacionPreferida"}}),"Gratis"!==t.$store.state.unservicio.tarifa?i("q-btn",{staticClass:"q-mt-sm bg-primary text-white full-width",attrs:{label:"pagar"},on:{click:function(e){return t.validarDatos()}}}):i("q-btn",{staticClass:"q-mt-sm bg-primary text-white full-width",attrs:{label:"solicitar"},on:{click:function(e){return t.validarDatos()}}}),i("eligeMcpio")],1)},a=[],s=i("c973"),n=i.n(s),r=(i("96cf"),{name:"SolicitarServicio",components:{eligeMcpio:i("aa4a").default},data:function(){return{date:"2021/02/01",datos:{problema:"",momento:"",servicioId:"",instalacionId:"",usuarioId:"",estado:"",municipioId:"",provinciaId:""}}},methods:{validarDatos:function(){this.datos.problema=this.$store.state.problema,this.datos.momento=this.$store.state.momento,""===this.datos.problema||null===this.datos.problema||""===this.datos.momento||null===this.datos.momento||""===this.$store.state.instalacionPreferida||null===this.$store.state.instalacionPreferida||"Escoge una instalación"===this.$store.state.instalacionPreferida?this.mensajeDatosIncompletos():"GRATIS"===this.$store.state.unservicio.tarifa||"Gratis"===this.$store.state.unservicio.tarifa||"gratis"===this.$store.state.unservicio.tarifa?this.solicitarServicio():this.$store.state.dialogo.autenticarSiscae=!0},mensajeDatosIncompletos:function(){this.$q.notify({color:"negative",position:"bottom",message:"Debe llenar todos los campos obligatorios y escoger una instalación",icon:"mdi-alert-circle"})},mensajeError:function(){this.$q.notify({color:"negative",position:"bottom",message:"Ha ocurrido un error inesperado y el Pedido no pudo realizarse. Intente de nuevo.",icon:"mdi-alert-circle"})},mensajeSatisfactorio:function(){this.$q.notify({color:"positive",position:"bottom",message:"Su solicitud ha sido enviada, muy pronto contactaremos con usted.",icon:"mdi-check-circle"})},solicitarServicio:function(){var t=this;return n()(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.datos.servicioId=t.$store.state.unservicio.id,t.datos.instalacionId=t.$store.state.instalacionDelPedido.id,t.datos.municipioId=t.$store.state.instalacionDelPedido.municipioId,t.datos.provinciaId=t.$store.state.instalacionDelPedido.provinciaId,t.datos.usuarioId=t.$store.state.credencial.id_usuario,t.datos.estado="pendiente",i={instalacionId:t.datos.instalacionId},t.$axios.post(t.$store.state.urlAPI+"/pedidos",t.datos).then((function(e){t.$axios.patch(t.$store.state.urlAPI+"/usuarios/"+t.$store.state.credencial.id_usuario,i).then((function(t){})).catch((function(t){console.log(t)})),t.refrescarPedidos()})).catch((function(t){console.log(t)}));case 8:case"end":return e.stop()}}),e)})))()},refrescarPedidos:function(){var t=this;console.log("entra para ir al escritorio");var e={where:{estado:{neq:"cancelado"},and:[{usuarioId:{eq:this.$store.state.credencial.id_usuario}}]},include:[{relation:"servicio"},{relation:"instalacion"}]},i=encodeURIComponent(JSON.stringify(e));this.$axios.get(this.$store.state.urlAPI+"/pedidos?filter="+i).then((function(e){console.log(e.data),t.$store.state.pedidos=e.data,t.$store.state.nombreTrab="",t.mensajeSatisfactorio(),t.$router.push("/escritorio"),t.loading=!1})).catch((function(t){console.log(t)}))}}}),c=r,l=i("2877"),d=Object(l["a"])(c,o,a,!1,null,null,null);e["default"]=d.exports},aa4a:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"q-pa-md q-gutter-sm"},[i("q-dialog",{model:{value:t.$store.state.dialogo.eligeMcpio,callback:function(e){t.$set(t.$store.state.dialogo,"eligeMcpio",e)},expression:"$store.state.dialogo.eligeMcpio"}},[i("q-card",[i("q-card-section",[i("div",{staticClass:"q-mt-xs q-mb-md row justify-end"},[i("q-item-label",{staticClass:"text-primary text-body1 text-center col-10"},[t._v("\n            Elegir Joven Club más cercano\n          ")]),i("q-btn",{staticClass:"text-primary",attrs:{flat:"",dense:"",size:"10px","icon-right":"mdi-window-close"},on:{click:function(e){t.$store.state.dialogo.eligeMcpio=!1}}})],1),i("div",{staticClass:"text-grey text-caption text-center"},[i("q-item-label",[t._v("\n            A esta instalación le llegará el pedido\n            cuando ud. solicite un servicio a domicilio,\n            elija la más cercana a su casa\n          ")])],1)]),i("q-card-section",[i("div",[i("SelectsProvMun")],1)]),t.$q.screen.gt.xs?i("div",{staticClass:"row justify-evenly"},t._l(t.$store.state.instalaciones,(function(t){return i("q-card-section",{key:t.id,staticClass:"col-5"},[i("TarjetaInstalacion",{attrs:{instalacion:t}})],1)})),1):i("div",t._l(t.$store.state.instalaciones,(function(t){return i("q-card-section",{key:t.id},[i("TarjetaInstalacion",{attrs:{instalacion:t}})],1)})),1)],1)],1)],1)},a=[],s={name:"eligeMcpio",components:{SelectsProvMun:i("646a").default,TarjetaInstalacion:i("44ea").default},data:function(){return{nombre:"",email:"",mensaje:""}},created:function(){this.nombre="",this.email="",this.mensaje="",""!==this.$store.state.credencial.token&&(this.nombre=this.$store.state.credencial.nombre,this.email=this.$store.state.credencial.email)},methods:{validarDatos:function(){""!==this.$store.state.credencial.token?""===this.mensaje||null===this.mensaje?this.mensajeDatosIncompletos():this.enviar():""===this.mensaje||null===this.mensaje||""===this.nombre||null===this.nombre||""===this.email||null===this.email?this.mensajeDatosIncompletos():this.enviar()},mensajeDatosIncompletos:function(){this.$q.notify({color:"negative",position:"bottom",message:"Debe llenar todos los campos obligatorios",icon:"mdi-alert-circle"})},mensajeSatisfactorio:function(){this.$q.notify({color:"positive",position:"bottom",message:"El mensaje fue enviado",icon:"mdi-check-circle"})},enviar:function(){this.mensajeSatisfactorio()}}},n=s,r=i("2877"),c=Object(r["a"])(n,o,a,!1,null,null,null);e["default"]=c.exports},ab18:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row justify-between q-mt-md"},[0===t.$store.state.cant_comentarios?i("q-item-label",{staticClass:"q-mt-md col-8 text-caption"},[i("small",[i("q-icon",{attrs:{name:"mdi-comment",size:"xs"}}),t._v(" No se ha(n) publicado comentarios")],1)]):i("q-item-label",{staticClass:"q-mt-md col-8 text-caption"},[i("q-icon",{attrs:{name:"mdi-comment",size:"xs"}}),t._v(" Se ha(n) publicado\n      "),i("strong",[t._v(" "+t._s(t.$store.state.cant_comentarios)+" ")]),t._v("\n      comentario(s)\n    ")],1),i("q-btn",{staticClass:"q-mt-sm text-primary col",attrs:{label:"opinar",flat:"",size:"sm"},on:{click:function(e){return t.opinar()}}})],1),0!==t.$store.state.cant_comentarios?i("div",{staticClass:"q-mt-lg text-caption"},t._l(t.$store.state.comentarios,(function(e){return i("div",{key:e.id},[i("q-card",{staticClass:"bg-grey-3 q-mb-md"},[i("q-card-section",[i("q-item-label",{staticClass:"q-mb-md"},[i("q-icon",{attrs:{size:"xs",name:"mdi-comment-outline",left:""}}),i("strong",[t._v(t._s(e.usuario.email)+":")])],1),0!==e.calificacion?i("q-rating",{attrs:{readonly:"",color:"warning"},model:{value:e.calificacion,callback:function(i){t.$set(e,"calificacion",i)},expression:"item.calificacion"}}):t._e(),void 0!==e.comentario&&""!==e.comentario&&null!==e.comentario&&!0===e.aprobado?i("q-item-label",[t._v("\n            "+t._s(e.comentario)+"\n          ")]):t._e(),i("q-item-label",{staticClass:"text-right"},[i("small",[t._v(t._s(e.fecha_publicado))])])],1)],1)],1)})),0):t._e(),i("CalificarProducto")],1)},a=[],s={name:"ComentariosProducto",components:{CalificarProducto:i("e25d").default},data:function(){return{}},created:function(){},methods:{refrescarComentarios:function(){var t=this;this.$store.state.comentarios=[],this.$store.state.cant_comentarios=0;var e={where:{or:[{calificacion:{neq:0}},{aprobado:{eq:!0}}],and:[{productoId:{eq:this.$store.state.unproducto.id}}]},include:[{relation:"usuario"}]},i=encodeURIComponent(JSON.stringify(e));this.$axios.get(this.$store.state.urlAPI+"/comentarios?filter="+i).then((function(e){t.$store.state.comentarios=e.data,t.$store.state.cant_comentarios=t.$store.state.comentarios.length,console.log(t.$store.state.comentarios)})).catch((function(t){console.log(t)}))},opinar:function(){""!==this.$store.state.credencial.token?this.$store.state.dialogo.calificarProducto=!0:this.$q.notify({color:"negative",position:"bottom",message:"Debe autenticarse si desea opinar sobre el producto",icon:"mdi-alert-circle"})}}},n=s,r=i("2877"),c=Object(r["a"])(n,o,a,!1,null,null,null);e["default"]=c.exports},e25d:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"q-pa-md q-gutter-sm"},[i("q-dialog",{model:{value:t.$store.state.dialogo.calificarProducto,callback:function(e){t.$set(t.$store.state.dialogo,"calificarProducto",e)},expression:"$store.state.dialogo.calificarProducto"}},[""!==t.$store.state.credencial.token?i("q-card",{staticStyle:{width:"500px"}},[i("q-card-section",[i("div",{staticClass:"q-mt-xs q-mb-md row justify-end"},[i("q-item-label",{staticClass:"text-primary text-body1 text-center col-10"},[t._v("\n            Opinar sobre "),i("strong",[t._v(t._s(t.$store.state.unproducto.nombre))])]),i("q-btn",{staticClass:"text-primary",attrs:{flat:"",dense:"",size:"10px","icon-right":"mdi-window-close"},on:{click:function(e){t.$store.state.dialogo.calificarProducto=!1}}})],1)]),i("q-card-section",{staticClass:"q-pt-none"},[i("div",{staticClass:"q-pa-md q-gutter-y-md"},[i("q-item-label",{staticClass:"text-caption text-grey-8"},[i("strong",[t._v("Calificación:")])]),i("q-rating",{attrs:{size:"md",color:"warning",value:t.datos.calificacion,dense:""},model:{value:t.datos.calificacion,callback:function(e){t.$set(t.datos,"calificacion",e)},expression:"datos.calificacion"}})],1),i("div",{staticClass:"q-pa-md q-gutter-y-md"},[i("q-input",{attrs:{filled:"",type:"textarea",dense:"","input-class":"text-right","label-slot":"",clearable:"",hint:"Este sitio se reserva el derecho de la publicación de los comentarios.\n                No se harán visibles aquellos que sean denigrantes, ofensivos, difamatorios o\n                que estén fuera de contexto."},scopedSlots:t._u([{key:"label",fn:function(){return[i("div",{staticClass:"row items-center all-pointer-events"},[t._v("\n                  Si lo desea, puede brindarnos su opinión\n                ")])]},proxy:!0}],null,!1,2482770116),model:{value:t.datos.comentario,callback:function(e){t.$set(t.datos,"comentario",e)},expression:"datos.comentario"}})],1)]),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{staticClass:"bg-primary text-white",attrs:{push:"",label:"Opinar",size:"md"},on:{click:function(e){return t.validarDatos()}}})],1)],1):i("q-card",[i("q-card-section",[i("div",{staticClass:"text-red"},[i("q-item-label",[i("q-icon",{attrs:{name:"error",size:"25px",color:"red"}}),t._v("\n             Debe estar autenticado para opinar sobre este producto.\n          ")],1)],1)])],1)],1)],1)},a=[],s=i("c973"),n=i.n(s),r=(i("96cf"),{name:"CalificarProducto",data:function(){return{datos:{calificacion:0,comentario:"",productoId:"",usuarioId:"",aprobado:Boolean}}},created:function(){},methods:{validarDatos:function(){0===this.datos.calificacion&&""===this.datos.comentario?this.mensajeError():this.enviar()},mensajeError:function(){this.$q.notify({color:"negative",position:"bottom",message:"Debe calificar el producto o escribir un comentario",icon:"mdi-alert-circle"})},mensajeSatisfactorio:function(){this.$q.notify({color:"positive",position:"bottom",message:"Gracias por su opinión",icon:"mdi-check-circle"})},calculaPromedio:function(){var t=this,e={calificacion:this.datos.calificacion};this.$axios.patch(this.$store.state.urlAPI+"/productos/"+this.$store.state.unproducto.id,e).then((function(e){console.log(e.data),t.refrescarComentarios()})).catch((function(t){console.log(t)}))},refrescarComentarios:function(){var t=this,e={where:{or:[{calificacion:{neq:0}},{aprobado:{eq:!0}}],and:[{productoId:{eq:this.$store.state.unproducto.id}}]},include:[{relation:"usuario"}]},i=encodeURIComponent(JSON.stringify(e));this.$axios.get(this.$store.state.urlAPI+"/comentarios?filter="+i).then((function(e){t.$store.state.comentarios=e.data,t.$store.state.cant_comentarios=t.$store.state.comentarios.length,console.log(t.$store.state.comentarios)})).catch((function(t){console.log(t)}))},enviar:function(){var t=this;return n()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""===t.datos.comentario){e.next=7;break}if(0==t.datos.calificacion){e.next=4;break}return e.next=4,t.calculaPromedio();case 4:t.datos.productoId=t.$store.state.unproducto.id,t.datos.usuarioId=t.$store.state.credencial.id_usuario,t.$axios.post(t.$store.state.urlAPI+"/comentarios",t.datos).then((function(e){t.datos.comentario="",t.datos.calificacion=0,t.mensajeSatisfactorio(),t.$store.state.dialogo.calificarProducto=!1})).catch((function(t){console.log(t)}));case 7:if(0==t.datos.calificacion||""!=t.datos.comentario){e.next=14;break}return e.next=10,t.calculaPromedio();case 10:t.datos.productoId=t.$store.state.unproducto.id,t.datos.usuarioId=t.$store.state.credencial.id_usuario,t.datos.aprobado=!0,t.$axios.post(t.$store.state.urlAPI+"/comentarios",t.datos).then((function(e){t.datos.calificacion=0,t.mensajeSatisfactorio(),t.refrescarComentarios(),t.$store.state.dialogo.calificarProducto=!1})).catch((function(t){console.log(t)}));case 14:case"end":return e.stop()}}),e)})))()}}}),c=r,l=i("2877"),d=Object(l["a"])(c,o,a,!1,null,null,null);e["default"]=d.exports},ef12:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fullscreen bg-blue text-white text-center q-pa-md flex flex-center"},[i("div",[t.$q.screen.gt.sm?i("div",{staticStyle:{"font-size":"30vh"}},[t._v("\n      Oops...\n    ")]):i("div",{staticStyle:{"font-size":"15vh"}},[t._v("\n      Oops...\n    ")]),t.$q.screen.gt.sm?i("div",{staticClass:"text-h2",staticStyle:{opacity:".4"}},[t._v("\n      No tiene acceso\n    ")]):i("div",{staticClass:"text-h4",staticStyle:{opacity:".4"}},[t._v("\n      No tiene acceso\n    ")]),i("q-btn",{staticClass:"q-mt-xl",attrs:{color:"white","text-color":"blue",unelevated:"",to:"/",label:"Ir a Inicio","no-caps":""}})],1)])},a=[],s={name:"NoAcceso"},n=s,r=i("2877"),c=Object(r["a"])(n,o,a,!1,null,null,null);e["default"]=c.exports},ff60:function(t,e,i){"use strict";i("2805")}}]);